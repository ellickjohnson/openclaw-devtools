# Full docker-compose.yml for OpenClaw with DevTools
# Copy this file to your OpenClaw config directory and modify as needed

services:
  openclaw-gateway:
    image: ${OPENCLAW_IMAGE:-openclaw:local}
    environment:
      HOME: /home/node
      TERM: xterm-256color
      OPENCLAW_GATEWAY_TOKEN: ${OPENCLAW_GATEWAY_TOKEN}
    volumes:
      - ${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw
      - ${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace
    ports:
      - "${OPENCLAW_GATEWAY_PORT:-18789}:18789"
      - "${OPENCLAW_BRIDGE_PORT:-18790}:18790"
    init: true
    restart: unless-stopped
    command:
      - "node"
      - "dist/index.js"
      - "gateway"
      - "--bind"
      - "${OPENCLAW_GATEWAY_BIND:-lan}"
      - "--port"
      - "18789"

  # DevTools UI - Modern log viewer for OpenClaw
  openclaw-devtools:
    build:
      context: ${OPENCLAW_WORKSPACE_DIR}/devtools
      dockerfile: Dockerfile
    ports:
      - "${OPENCLAW_DEVTOOLS_PORT:-3000}:3000"
    depends_on:
      - openclaw-gateway
    restart: unless-stopped
    environment:
      - VITE_GATEWAY_URL=ws://openclaw-gateway:18789
